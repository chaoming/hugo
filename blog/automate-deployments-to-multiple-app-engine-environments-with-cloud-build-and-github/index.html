<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="A step-by-step guide on how to deploy to staging and production App Engine environments by committing to git branches with Cloud Build and Github."><title>Automate Deployments to Multiple App Engine Environments with Cloud Build and GitHub</title><link rel=canonical href=https://chaoming.github.io/hugo/blog/automate-deployments-to-multiple-app-engine-environments-with-cloud-build-and-github/><link rel=stylesheet href=/hugo/scss/style.min.ac77dcf8b111b51da39a92990f431923f210f3876d85798a2125667f96dc33a4.css><meta property="og:title" content="Automate Deployments to Multiple App Engine Environments with Cloud Build and GitHub"><meta property="og:description" content="A step-by-step guide on how to deploy to staging and production App Engine environments by committing to git branches with Cloud Build and Github."><meta property="og:url" content="https://chaoming.github.io/hugo/blog/automate-deployments-to-multiple-app-engine-environments-with-cloud-build-and-github/"><meta property="og:site_name" content="Chaoming's Blog"><meta property="og:type" content="article"><meta property="article:section" content="Post"><meta property="article:tag" content="github"><meta property="article:tag" content="cloud build"><meta property="article:tag" content="deploy"><meta property="article:tag" content="golang"><meta property="article:tag" content="php"><meta property="article:tag" content="appengine"><meta property="article:tag" content="google cloud platform"><meta property="article:tag" content="gcp"><meta property="article:published_time" content="2019-07-16T00:00:00+00:00"><meta property="article:modified_time" content="2019-07-16T00:00:00+00:00"><meta property="og:image" content="https://chaoming.github.io/hugo/blog/automate-deployments-to-multiple-app-engine-environments-with-cloud-build-and-github/1_UzYiagjfQwOZTlIwmCqKOQ.png"><meta name=twitter:site content="@ChaomingLi"><meta name=twitter:creator content="@ChaomingLi"><meta name=twitter:title content="Automate Deployments to Multiple App Engine Environments with Cloud Build and GitHub"><meta name=twitter:description content="A step-by-step guide on how to deploy to staging and production App Engine environments by committing to git branches with Cloud Build and Github."><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://chaoming.github.io/hugo/blog/automate-deployments-to-multiple-app-engine-environments-with-cloud-build-and-github/1_UzYiagjfQwOZTlIwmCqKOQ.png"><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-37357871-1","auto"),ga("send","pageview"))</script></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label="Toggle Menu">
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/hugo/><img src=/hugo/img/avatar_hucfd1e4e1e923fa2ea65408b850fbf57c_3588_300x0_resize_q75_box.jpg width=300 height=300 class=site-logo loading=lazy alt=Avatar></a></figure><div class=site-meta><h1 class=site-name><a href=/hugo>Chaoming's Blog</a></h1><h2 class=site-description>Tech entrepreneur, CEO of Insightech.</h2></div></header><ol class=social-menu><li><a href=https://github.com/chaoming target=_blank title=GitHub><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li><li><a href=https://www.linkedin.com/in/chaomingli/ target=_blank title=Linkedin><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-linkedin" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><rect x="4" y="4" width="16" height="16" rx="2"/><line x1="8" y1="11" x2="8" y2="16"/><line x1="8" y1="8" x2="8" y2="8.01"/><line x1="12" y1="16" x2="12" y2="11"/><path d="M16 16v-3a2 2 0 00-4 0"/></svg></a></li><li><a href=https://twitter.com/ChaomingLi target=_blank title=Twitter><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-twitter" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M22 4.01c-1 .49-1.98.689-3 .99-1.121-1.265-2.783-1.335-4.38-.737S11.977 6.323 12 8v1c-3.245.083-6.135-1.395-8-4 0 0-4.182 7.433 4 11-1.872 1.247-3.739 2.088-6 2 3.308 1.803 6.913 2.423 10.034 1.517 3.58-1.04 6.522-3.723 7.651-7.742a13.84 13.84.0 00.497-3.753C20.18 7.773 21.692 5.25 22 4.009z"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/hugo/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg><span>Home</span></a></li><li><a href=/hugo/about-me/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg><span>About Me</span></a></li><li><a href=/hugo/archives/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg><span>Archives</span></a></li><li><a href=/hugo/projects/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg><span>Projects</span></a></li><li><a href=/hugo/search/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg><span>Search</span></a></li><div class=menu-bottom-section><li id=dark-mode-toggle><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><span>Dark Mode</span></li></div></ol></aside><main class="main full-width"><article class="has-image main-article"><header class=article-header><div class=article-image><a href=/hugo/blog/automate-deployments-to-multiple-app-engine-environments-with-cloud-build-and-github/><img src=/hugo/blog/automate-deployments-to-multiple-app-engine-environments-with-cloud-build-and-github/1_UzYiagjfQwOZTlIwmCqKOQ_hub44496e5fe12534548beed0d5e7745a9_48424_800x0_resize_box_3.png srcset="/hugo/blog/automate-deployments-to-multiple-app-engine-environments-with-cloud-build-and-github/1_UzYiagjfQwOZTlIwmCqKOQ_hub44496e5fe12534548beed0d5e7745a9_48424_800x0_resize_box_3.png 800w, /hugo/blog/automate-deployments-to-multiple-app-engine-environments-with-cloud-build-and-github/1_UzYiagjfQwOZTlIwmCqKOQ_hub44496e5fe12534548beed0d5e7745a9_48424_1600x0_resize_box_3.png 1600w" width=800 height=441 loading=lazy alt="Featured image of post Automate Deployments to Multiple App Engine Environments with Cloud Build and GitHub"></a></div><div class=article-details><header class=article-category><a href=/hugo/categories/devop/>DevOp</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/hugo/blog/automate-deployments-to-multiple-app-engine-environments-with-cloud-build-and-github/>Automate Deployments to Multiple App Engine Environments with Cloud Build and GitHub</a></h2><h3 class=article-subtitle>A step-by-step guide on how to deploy to staging and production App Engine environments by committing to git branches with Cloud Build and Github.</h3></div><footer class=article-time><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg><time class=article-time--published>Jul 16, 2019</time></div><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg><time class=article-time--reading>5 minute read</time></div></footer></div></header><section class=article-content><p>If you want to securely automate deployments of your App Engine application to multiple environments such as staging and production with a simple Git commit or a pull request, this article will outline the steps for you.</p><h2 id=why-you-should-do-this>Why You Should Do This:</h2><p>Good reasons to automate the deployment process are:</p><ul><li>Reduce the impact of human error on a deployment</li><li>Improve security by not including any credentials or sensitive configuration settings in the source code</li><li>Restrict permission to deploy to certain environments (e.g. production) with a process</li><li>Streamline the deployment process and gain the benefits of automation (e.g. testing)</li></ul><h2 id=assumptions>Assumptions:</h2><p>I am not going to discuss how to set up Git repositories and GitHub accounts. There are plenty of tutorials online for those topics.</p><p>In this article, I’ll only assume that you have an App Engine application. I have used this process for Golang and PHP, but it will work for Python and other languages.</p><h2 id=step-1-enable-branch-restrictions>Step 1: Enable Branch Restrictions</h2><p>In your GitHub repository, you need to have some branches, at least a staging branch and a master branch. The workflow is that a developer can commit to the staging branch. It will automatically deploy the application to a staging App Engine environment.</p><p>After the application is tested in the staging environment:</p><ul><li>The developer will create a pull request</li><li>The administrator will merge it with the master branch</li><li>The automation will deploy the application to the production environment</li></ul><p>This workflow is a bit oversimplified. But the point is: Only someone with permission can deploy the application to the production by committing to the master branch. This can be achieved with <a class=link href=https://help.github.com/en/articles/enabling-branch-restrictions target=_blank rel=noopener>branch restrictions</a>.</p><p><img src=/hugo/blog/automate-deployments-to-multiple-app-engine-environments-with-cloud-build-and-github/1_UzYiagjfQwOZTlIwmCqKOQ.png width=837 height=461 srcset="/hugo/blog/automate-deployments-to-multiple-app-engine-environments-with-cloud-build-and-github/1_UzYiagjfQwOZTlIwmCqKOQ_hub44496e5fe12534548beed0d5e7745a9_48424_480x0_resize_box_3.png 480w, /hugo/blog/automate-deployments-to-multiple-app-engine-environments-with-cloud-build-and-github/1_UzYiagjfQwOZTlIwmCqKOQ_hub44496e5fe12534548beed0d5e7745a9_48424_1024x0_resize_box_3.png 1024w" loading=lazy alt="Deployment Workflow Diagram" class=gallery-image data-flex-grow=181 data-flex-basis=435px></p><h2 id=step-2-move-all-environment-related-configurations-to-appyaml>Step 2: Move All Environment Related Configurations to app.yaml</h2><p>It’s very common for an application to have environment variables for configuration and secrets such as database credentials, domains, GCP key files, etc. Some of these details are security-critical so they should never be included in the source code. If you have embedded them into part of the source code, it’s time to remove them and put them into the app.yaml file that is kept outside of the repository and only is used during deployment.</p><p>In your app.yaml file, you can have these variables as environment variables in the following syntax:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>env_variables</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>DOMAIN</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;staging.mydomain.com&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>DEBUG_MODE</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>MYSQL_DSN</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;blah blah&#39;</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>The App Engine platform will take these values from app.yaml and make them available to your application, which can read the environment variables to ensure your application has the correct settings.</p><p>Depending on which language your application is written in, there are different ways to read the environment variables. Here is the link to Python and other languages (click on the language links at the top of the content to switch to your preferred language): <a class=link href=https://cloud.google.com/appengine/docs/standard/python/config/appref target=_blank rel=noopener>https://cloud.google.com/appengine/docs/standard/python/config/appref</a></p><p>In PHP, use:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=nx>getenv</span><span class=p>(</span><span class=s1>&#39;VAR NAME&#39;</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><p>I don’t think $_ENV works.</p><p>If you need app.yaml for your local environment, just make sure the file is in .gitignore so it won’t be included in the repository.</p><p>Once you have put the environment variables into the staging app.yaml file, upload it to a Google Cloud Storage bucket and make sure it’s not available to the public (by default it isn’t). Do the same for the production app.yaml but use a different bucket.</p><h2 id=step-3-create-your-cloud-build-for-staging>Step 3: Create Your Cloud Build for Staging</h2><p>In GCP, Cloud Build can trigger a deployment from Git commits to a certain branch. The web UI is very simple to follow to create the trigger. The trick is to have a variable called _BUCKET which is the bucket name that contains your app.yaml</p><p><img src=/hugo/blog/automate-deployments-to-multiple-app-engine-environments-with-cloud-build-and-github/1_GBG2F-EdARSeVptNoYNo2Q.png width=501 height=597 srcset="/hugo/blog/automate-deployments-to-multiple-app-engine-environments-with-cloud-build-and-github/1_GBG2F-EdARSeVptNoYNo2Q_hua4b15b1a37c795d4e3b80fd73647b251_45868_480x0_resize_box_3.png 480w, /hugo/blog/automate-deployments-to-multiple-app-engine-environments-with-cloud-build-and-github/1_GBG2F-EdARSeVptNoYNo2Q_hua4b15b1a37c795d4e3b80fd73647b251_45868_1024x0_resize_box_3.png 1024w" loading=lazy alt="Cloud Build Screenshot" class=gallery-image data-flex-grow=83 data-flex-basis=201px></p><p>And, you need a cloudbuild.yaml file in your Git repository to control the deployment process. Below is a simple cloudbuild.yaml file that does two things:</p><ul><li>Copy the app.yaml file from the bucket</li><li>Deploy the application</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>steps</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>gcr.io/cloud-builders/gsutil</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>args</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s1>&#39;cp&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;gs://$_BUCKET/app.yaml&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;html/app.yaml&#39;</span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;gcr.io/cloud-builders/gcloud&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>args</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s1>&#39;app&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;deploy&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;html/&#39;</span><span class=p>]</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>You can see that I use $_BUCKET in the cloudbuild.yaml file as the bucket name of the app.yaml file. This means when I configure the production Cloud Build trigger, the same cloudbuild.yaml will work without any modification.</p><p>Now, commit to your staging branch, and you will see Cloud Build is triggered and starts the deployment process automatically.</p><h2 id=step-4-grant-permissions-to-cloud-build>Step 4: Grant Permissions to Cloud Build</h2><p>The deployment is likely to fail because Cloud Build doesn’t have the permissions to access Cloud Storage, App Engine, etc.</p><p>Go to IAM web UI in your GCP project, and change the permission settings of the Cloud Build service account to grant it App Engine Admin and other relevant permissions for completing the deployment. Now, retry the deployment in Cloud Build, you should see the successfully deployed message in the logs.</p><h2 id=step-5-repeat-step-3-and-step-4-for-production>Step 5: Repeat Step 3 and Step 4 for Production</h2><p>Just repeat the above two steps in the production project. Make sure the production app.yaml is in the Cloud Storage bucket for production, and the Cloud Build trigger _BUCKET variable is pointing to the production bucket as well.</p><p>Because only the system administrator is able to commit to production, as a developer, you should create a Pull Request in the GitHub repository to merge your changes from the staging branch into the master branch. Once the Pull Request is approved and merged, it will trigger the Cloud Build deployment process in the production project.</p><p>Conclusion:</p><p>This approach not only streamlines the deployment process, but it also makes it more secure and reliable.</p><p>If you have any feedback or questions, please feel free to comment below.</p></section><footer class=article-footer><section class=article-tags><a href=/hugo/tags/github/>github</a>
<a href=/hugo/tags/cloud-build/>cloud build</a>
<a href=/hugo/tags/deploy/>deploy</a>
<a href=/hugo/tags/golang/>golang</a>
<a href=/hugo/tags/php/>php</a>
<a href=/hugo/tags/appengine/>appengine</a>
<a href=/hugo/tags/google-cloud-platform/>google cloud platform</a>
<a href=/hugo/tags/gcp/>gcp</a></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>Related content</h2><div class=related-content><div class="flex article-list--tile"><article class=has-image><a href=/hugo/blog/how-to-use-docker-for-go-app-engine-development-and-deploy-to-standard-environment/><div class=article-image><img src=/hugo/blog/how-to-use-docker-for-go-app-engine-development-and-deploy-to-standard-environment/_hua7466efbba06b7d15b358bb2f2b1c17f_32786_7446836d4516315414ed2fbdcb5c73b2.png width=250 height=150 loading=lazy alt="Featured image of post How to Use Docker for Go App Engine Development and Deploy to Standard Environment" data-hash="md5-oM9SrXz1zCxonHxCYlTDIQ=="></div><div class=article-details><h2 class=article-title>How to Use Docker for Go App Engine Development and Deploy to Standard Environment</h2></div></a></article><article class=has-image><a href=/hugo/blog/how-to-install-custom-ssl-certificate-on-google-cloud-platform/><div class=article-image><img src=/hugo/blog/how-to-install-custom-ssl-certificate-on-google-cloud-platform/_hu18448c6d191edd9c683761e11ae3b1b2_16669_db12362d4874d55c6fa7d5c143e2b567.jpeg width=250 height=150 loading=lazy alt="Featured image of post How to Install Custom SSL Certificate on Google Cloud Platform" data-hash="md5-kbT7Mvu0aaslcVZiiHIprg=="></div><div class=article-details><h2 class=article-title>How to Install Custom SSL Certificate on Google Cloud Platform</h2></div></a></article><article class=has-image><a href=/hugo/blog/joining-partitioned-tables-to-create-views-in-bigquery/><div class=article-image><img src=/hugo/blog/joining-partitioned-tables-to-create-views-in-bigquery/bigquery-500x250.4ab5a40f0871bcee044d45191d39bc64_hu38b1e2727a49b2316807e11208821041_104204_250x150_fill_box_smart1_3.png width=250 height=150 loading=lazy alt="Featured image of post Joining Partitioned Tables to Create Views in BigQuery" data-hash="md5-SrWkDwhxvO4ETUUZHTm8ZA=="></div><div class=article-details><h2 class=article-title>Joining Partitioned Tables to Create Views in BigQuery</h2></div></a></article></div></div></aside><div class=disqus-container><div id=disqus_thread></div><script type=application/javascript>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//hugo-theme-stack.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div><style>.disqus-container{background-color:var(--card-background);border-radius:var(--card-border-radius);box-shadow:var(--shadow-l1);padding:var(--card-padding)}</style><script>window.addEventListener("onColorSchemeChange",e=>{typeof DISQUS=="object"&&DISQUS.reset({reload:!0})})</script><footer class=site-footer><section class=copyright>&copy;
2020 -
2022 Chaoming's Blog</section><section class=powerby>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>Theme <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.12.0>Stack</a></b> designed by <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a></section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">Table of contents</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#why-you-should-do-this>Why You Should Do This:</a></li><li><a href=#assumptions>Assumptions:</a></li><li><a href=#step-1-enable-branch-restrictions>Step 1: Enable Branch Restrictions</a></li><li><a href=#step-2-move-all-environment-related-configurations-to-appyaml>Step 2: Move All Environment Related Configurations to app.yaml</a></li><li><a href=#step-3-create-your-cloud-build-for-staging>Step 3: Create Your Cloud Build for Staging</a></li><li><a href=#step-4-grant-permissions-to-cloud-build>Step 4: Grant Permissions to Cloud Build</a></li><li><a href=#step-5-repeat-step-3-and-step-4-for-production>Step 5: Repeat Step 3 and Step 4 for Production</a></li></ol></nav></div></section></aside></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/hugo/ts/main.js defer></script>
<script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>